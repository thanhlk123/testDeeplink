<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting...</title>
  <script>
    document.addEventListener('DOMContentLoaded', function() {

      const universalLink = 'https://portal-uat.prudential.com.vn/customer-portal-revamp/login?campaignType=adoption';
      const playStoreLink = 'https://play.google.com/store/apps/details?id=com.example.myapp';

      // Tạo một biến để kiểm tra xem ứng dụng có được mở không
      let appOpened = false;

      // Tạo một sự kiện để xác định khi trang bị ẩn đi
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          appOpened = true;
        }
      });

      // Thử mở liên kết universal
      const openUniversalLink = () => {
        // Thay đổi location.href để mở liên kết
        window.location.href = universalLink;

        // Sử dụng setTimeout để chuyển hướng đến Play Store nếu không mở được ứng dụng
        setTimeout(() => {
          if (!appOpened) {
            window.location.href = playStoreLink;
          }
        }, 2000); // Điều chỉnh thời gian chờ nếu cần
      };

      // Gọi hàm để mở liên kết
      openUniversalLink();
    });
  </script>
</head>
<body>
  <h2>Redirecting...</h2>
  <p>If you are not redirected, <a href="https://play.google.com/store/apps/details?id=com.example.myapp">click here to go to Play Store</a>.</p>
</body>
</html>